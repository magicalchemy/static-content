# Изображения и конвертация в AVIF

[← Назад к README](../README.md)

## Форматы

- Исходные: `.2x.png`, `.2x.jpg`, `.2x.jpeg`
- Целевые: `.2x.avif`, `.1x.avif`, `.mobile.2x.avif`, `.mobile.1x.avif`
- Хранить в `images/` внутри папки статьи.

## Конвертация (Node.js — рекомендуется)

```bash
cd src/game-lore-library
npm ci

# Оба окружения
npm run images:avif

# Только stage
npm run images:avif:stage

# Только production
npm run images:avif:production

# Тонкая настройка качества/усилий
node tools/images-avif.mjs -e stage -q 60 -E 6
```

Скрипт создаёт/обновляет `.avif` рядом с исходниками и пропускает файлы, которые уже актуальны (инкрементально).

## Что делает конвертер

Конвертер автоматически:

- Находит все картинки `.2x.png`, `.2x.jpg` или `.2x.jpeg` в папках статей
- Создаёт `.2x.avif` и `.1x.avif` (уменьшенная в 2 раза копия)
- Сохраняет новые файлы рядом с оригиналами в той же папке
- Не трогает оригинальные файлы
- Пропускает уже созданные AVIF файлы (для пересоздания удалите старые файлы вручную)

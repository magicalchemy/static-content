# Game Versions

Каталог содержит данные о версиях игры Magic Alchemy, которые отображаются на сайте и в клиенте. Здесь хранятся сценарии для автоматизации работы с версиями и сами данные по окружениям.

## Структура

- `stage/` — подготовительная среда. Содержит:
  - `updates.json` — список релизов в порядке убывания версий;
  - `versions/` — директории релизов формата `X.Y.Z` с локализованными описаниями (`en.md`, `ru.md`).
- `production/` — итоговые данные для боевого окружения (структура аналогична `stage`).
- `scripts/` — вспомогательные CLI-утилиты для работы с версиями.

## Скрипты

Запускать скрипты нужно из корня репозитория:

```bash
node src/game-versions/scripts/<имя-скрипта>.js
```

### Добавление новой версии

```bash
node src/game-versions/scripts/add-version-simple.js
```

Скрипт интерактивно запросит:
1. Номер версии в формате `X.Y.Z` и проверит, что версия уникальна.
2. Дату релиза (`YYYY-MM-DD`). По умолчанию — текущая дата.
3. Тип релиза (`feature`, `fix`, `update`).

В результате будет создана директория `stage/versions/<version>` с шаблонными файлами `en.md` и `ru.md`, а запись о релизе добавится в начало `stage/updates.json`.

### Изменение номера существующей версии

```bash
node src/game-versions/scripts/change-version.js
```

Скрипт запросит текущую и новую версии, убедится, что данные корректны, переименует директорию `stage/versions/<current>` в `stage/versions/<new>` и обновит запись в `stage/updates.json`.

## Ручное редактирование данных

- При добавлении релиза вручную соблюдайте формат файлов `en.md` и `ru.md` и поддерживайте порядок в `updates.json` (новые релизы в начале).
- Не забывайте синхронизировать изменения между `stage` и `production`, когда релиз уходит в продакшен.

## Рекомендации

- После автоматических скриптов обязательно заполните описания релиза в `en.md` и `ru.md`.
- Если требуется комплексная миграция данных, предпочитайте создавать отдельные утилиты в каталоге `scripts` вместо ручных правок.
